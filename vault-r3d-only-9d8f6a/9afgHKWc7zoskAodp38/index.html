<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html:not([data-secret="ok"]) body {
            display: none;
        }
        body {
            background: #0f0f0f;
            color: #e3e3e3;
            font-family: "Georgia", serif;
            padding: 40px 20px;
            max-width: 680px;
            margin: 0 auto;
            line-height: 1.7;
            font-size: 18px;
        }

        .container {
            background: #151515;
            padding: 32px;
            border: 1px solid #2a2a2a;
        }

        h1 {
            font-size: 22px;
            margin-bottom: 20px;
            font-weight: normal;
            color: #d7d7d7;
        }

        p {
            margin-bottom: 18px;
        }
    </style>
    
<script>
    const clearAccess = () => {
        try {
            sessionStorage.removeItem('dreiji.once.token');
            sessionStorage.removeItem('dreiji.once.path');
        } catch(e){}
        document.documentElement.removeAttribute('data-secret');
    };

    window.addEventListener('pagehide', clearAccess);

    window.addEventListener('pageshow', (ev) => {
        if (ev.persisted) {
            clearAccess();
            location.reload();
        }
    });
    (() => {
        const TOKEN_KEY = 'dreiji.once.token';
        const PATH_KEY = 'dreiji.once.path';

        const normalizePath = (value) => {
            const trimmed = (value || '')
                .replace(/index\.html$/i, '')
                .replace(/\/+$/, '');
            return trimmed || '/';
        };

        try {
            const token = sessionStorage.getItem(TOKEN_KEY);
            const rawPath = sessionStorage.getItem(PATH_KEY);

            clearAccess();

            if (!token || !rawPath) throw new Error('no access');

            const expectedPath = normalizePath(rawPath);

            const currentPath = normalizePath(location.pathname);
            const currentHash = (location.hash || '').replace(/^#/, '');

            if (expectedPath !== currentPath || token !== currentHash) throw new Error('mismatch');

            document.documentElement.setAttribute('data-secret', 'ok');
        } catch (err) {
            window.location.replace('../');
        }
    })();
</script>

</head>
<body>
    <div class="container">
        <h1>swieta</h1>

        <p>zycze ci swiat, ktore nie beda cie dlawic<br>
        bez tego calego blysku, ktory nic nie znaczy<br>
        zeby trafila ci sie chociaz jedna chwila spokoju<br>
        taka, w ktorej nic nie ciagnie cie w dol<br>
        i mozesz po prostu stac, oddychac, byc</p>

        <p>fajnie by bylo, gdyby w ten dzien zrobilo sie troche cieplej<br>
        nie jakas wielka zmiana<br>
        po prostu mniej zimna wokol ciebie</p>

        <p>chce, zeby prezent, ktory dostaniesz, byl jak male swiatlo<br>
        takie, co nie rozwiazuje problemow, ale je na chwile odsuwa<br>
        zeby przypomnial ci, ze nie musisz dzwigac wszystkiego sama<br>
        i ze zaslugujesz na cos dobrego, nawet jesli tego tobie nie pokazalem</p>
    </div>
</body>
</html>
